import sqlite3
import os

# Database path (using /tmp for Heroku ephemeral filesystem)
DB_PATH = '/tmp/pun_library.db'

# Templates categorized by type and category
TEMPLATES = {
    'post': {
        'pun': [
            "Ruck it Up with a {distance}-mile trek! ğŸ¥¾ #GetRucky",
            "Don't get stuck, ruck! Hit {distance} miles today! ğŸ¥¾ #RuckItUp",
            "Ruck 'n' roll! Smash {distance} miles with @getrucky! ğŸ¥¾",
            "Get Rucky! Tackle a {distance}-mile ruck today! ğŸ¥¾ #RuckLife",
            "Ruck yeah! Power through {distance} miles! ğŸ¥¾ @getrucky",
            "Ruck your world with a {distance}-mile challenge! ğŸ¥¾ #GetRucky",
            "Don't ruck out, clock {distance} miles! ğŸ¥¾ #RuckItUp",
            "Ruck on! Crush {distance} miles this week! ğŸ¥¾ @getrucky",
            "Ruck hard or go home! Aim for {distance} miles! ğŸ¥¾ #RuckLife",
            "Ruck it out! Push for {distance} miles today! ğŸ¥¾ #GetRucky",
            "Ruck 'til you drop! Go for {distance} miles! ğŸ¥¾ @getrucky",
            "Ruck and load! Hit {distance} miles with sass! ğŸ¥¾ #RuckItUp",
            "Ruck steady! Aim for {distance} miles this weekend! ğŸ¥¾",
            "Ruck wild! Take on {distance} miles today! ğŸ¥¾ #GetRucky",
            "Ruck rules! Smash {distance} miles with @getrucky! ğŸ¥¾",
        ],
        'challenge': [
            "Can you ruck {distance} miles this week? Tag @getrucky! ğŸ¥¾ #RuckItUp",
            "Challenge: Ruck {distance} miles by Sunday! Show us! ğŸ¥¾ @getrucky",
            "Ruck {distance} miles this weekend! Who's in? ğŸ¥¾ #GetRucky",
            "Take on a {distance}-mile ruck! Tag your progress! ğŸ¥¾ @getrucky",
            "Ruck {distance} miles in 2 days! Can you do it? ğŸ¥¾ #RuckLife",
            "Push yourself! Ruck {distance} miles this week! ğŸ¥¾ @getrucky",
            "Ruck challenge: {distance} miles by Friday! Go! ğŸ¥¾ #GetRucky",
            "Get moving! Ruck {distance} miles and tag us! ğŸ¥¾ @getrucky",
            "Ruck {distance} miles this month! Track it with us! ğŸ¥¾ #RuckItUp",
            "Challenge accepted? Ruck {distance} miles! ğŸ¥¾ @getrucky",
            "Ruck {distance} miles with a buddy! Tag 'em! ğŸ¥¾ #GetRucky",
            "Aim high! Ruck {distance} miles this week! ğŸ¥¾ @getrucky",
            "Ruck {distance} miles before the weekend! Go! ğŸ¥¾ #RuckLife",
            "Step up! Ruck {distance} miles and share! ğŸ¥¾ @getrucky",
            "Ruck {distance} miles for glory! Tag us! ğŸ¥¾ #GetRucky",
        ],
        'theme': [
            "Motivation Monday: Ruck {distance} miles to start strong! ğŸ¥¾ #GetRucky",
            "Ruck Tips Tuesday: Hydrate every {time} minutes! ğŸ¥¾ #RuckItUp",
            "Wellness Wednesday: Stretch post-ruck for recovery! ğŸ¥¾ @getrucky",
            "Throwback Thursday: Share your first ruck memory! ğŸ¥¾ #RuckLife",
            "Fitness Friday: Ruck {distance} miles for gains! ğŸ¥¾ #GetRucky",
            "Shout-out Saturday: Tag a ruck buddy to crush {distance} miles! ğŸ¥¾",
            "Ruck Fun Sunday: Enjoy a chill {distance}-mile ruck! ğŸ¥¾ #RuckItUp",
            "Motivation Monday: You're unstoppable! Ruck {distance} miles! ğŸ¥¾",
            "Ruck Tips Tuesday: Pack light for a {distance}-mile ruck! ğŸ¥¾",
            "Wellness Wednesday: Ruck for mental clarity! Try {distance} miles! ğŸ¥¾",
            "Throwback Thursday: Old ruck gear pic? Share it! ğŸ¥¾ #GetRucky",
            "Fitness Friday: Power ruck {distance} miles today! ğŸ¥¾ #RuckLife",
            "Shout-out Saturday: Who's your ruck hero? Tag 'em! ğŸ¥¾ @getrucky",
            "Ruck Fun Sunday: Scenic {distance}-mile ruck today? Snap it! ğŸ¥¾",
            "Motivation Monday: Ruck {distance} miles and own the week! ğŸ¥¾",
        ],
        'poll': [
            "What's your ruck weight? ğŸ¥¾ A) 20lb B) 40lb #GetRucky",
            "Ruck vibe? ğŸ¥¾ A) Solo B) Squad #RuckItUp @getrucky",
            "Favorite ruck terrain? ğŸ¥¾ A) Urban B) Trails #GetRucky",
            "Ruck time? ğŸ¥¾ A) Morning B) Evening #RuckLife",
            "Ruck goal? ğŸ¥¾ A) Distance B) Speed #GetRucky @getrucky",
            "Ruck pack style? ğŸ¥¾ A) Minimal B) Loaded #RuckItUp",
            "Ruck weather? ğŸ¥¾ A) Sunny B) Rainy #GetRucky",
            "Ruck playlist? ğŸ¥¾ A) Rock B) Podcasts #RuckLife @getrucky",
            "Ruck distance? ğŸ¥¾ A) 3 miles B) 10+ miles #GetRucky",
            "Ruck buddy? ğŸ¥¾ A) Human B) Doggo #RuckItUp @getrucky",
            "Ruck snack? ğŸ¥¾ A) Energy bar B) Fruit #GetRucky",
            "Ruck challenge? ğŸ¥¾ A) Hills B) Flat #RuckLife",
            "Ruck gear? ğŸ¥¾ A) Boots B) Sneakers #GetRucky @getrucky",
            "Ruck pace? ğŸ¥¾ A) Steady B) Sprint #RuckItUp",
            "Ruck motivation? ğŸ¥¾ A) Fitness B) Fun #GetRucky",
        ],
        'meme': [
            "When your ruck feels like a feather ğŸª¶ #RuckLife @getrucky",
            "Ruck pack: 40lb. Legs: Priceless. ğŸ¥¾ #GetRucky",
            "Rucking up hills like a boss! ğŸ¥¾ #RuckItUp",
            "Ruck now, nap later. ğŸ˜´ ğŸ¥¾ #RuckLife",
            "When someone says rucking is easy... ğŸ˜‚ ğŸ¥¾ #GetRucky",
            "Ruck pack heavier than my problems! ğŸ¥¾ #RuckItUp",
            "Rucking: Because walking is too mainstream. ğŸ¥¾ #RuckLife",
            "Ruck miles > Couch miles. ğŸ¥¾ #GetRucky @getrucky",
            "When your ruck buddy bails... solo ruck! ğŸ¥¾ #RuckItUp",
            "Ruck sweat is just weakness leaving! ğŸ’ª ğŸ¥¾ #RuckLife",
            "Ruck pack on, world off. ğŸ¥¾ #GetRucky",
            "Rucking: Turning sidewalks into gains. ğŸ¥¾ #RuckItUp",
            "When your ruck weight matches your grit! ğŸ¥¾ #RuckLife",
            "Ruck today, brag tomorrow. ğŸ¥¾ #GetRucky @getrucky",
            "Rucking: My cardio has weight! ğŸ¥¾ #RuckItUp",
        ],
        'shoutout': [
            "@RuckStar crushed {distance} miles! Ruck on! ğŸ¥¾ #GetRucky",
            "Big ruck props to @{user} for {distance} miles! ğŸ¥¾ #RuckItUp",
            "@{user} smashed {distance} miles! Legend! ğŸ¥¾ @getrucky",
            "Ruck yeah, @{user}! {distance} miles down! ğŸ¥¾ #RuckLife",
            "@{user} rucked {distance} miles! Epic! ğŸ¥¾ #GetRucky",
            "Shout-out to @{user} for {distance} miles! ğŸ¥¾ #RuckItUp",
            "@{user} owned {distance} miles! Keep rucking! ğŸ¥¾ @getrucky",
            "Ruck champ @{user} hit {distance} miles! ğŸ¥¾ #RuckLife",
            "@{user} rucked {distance} miles! Unstoppable! ğŸ¥¾ #GetRucky",
            "Kudos to @{user} for {distance} miles! ğŸ¥¾ #RuckItUp @getrucky",
        ],
        'ugc': [
            "Love this ruck pic from @{user}! Keep rucking! ğŸ¥¾ #GetRucky",
            "Epic ruck moment by @{user}! Share more! ğŸ¥¾ #RuckItUp",
            "@{user}'s ruck vibe is ğŸ”¥! Tag us! ğŸ¥¾ @getrucky",
            "Ruck inspo from @{user}! Got pics? ğŸ¥¾ #RuckLife",
            "@{user} showing ruck love! More snaps! ğŸ¥¾ #GetRucky",
            "Amazing ruck shot by @{user}! Keep it up! ğŸ¥¾ #RuckItUp",
            "@{user}'s ruck story rocks! Share yours! ğŸ¥¾ @getrucky",
            "Ruck goals with @{user}'s post! Tag us! ğŸ¥¾ #RuckLife",
            "@{user} rucking in style! More pics! ğŸ¥¾ #GetRucky",
            "Cheers to @{user} for this ruck gem! ğŸ¥¾ #RuckItUp @getrucky",
        ]
    },
    'reply': {
        'pun': [
            "Ruck yeah, you're killing it! Keep rucking! ğŸ¥¾ #GetRucky",
            "Don't ruck out now, you're on fire! ğŸ¥¾ #RuckItUp",
            "Ruck 'n' roll! Loving your energy! ğŸ¥¾ @getrucky",
            "Get Rucky! You're unstoppable! ğŸ¥¾ #RuckLife",
            "Ruck on, champ! You've got this! ğŸ¥¾ #GetRucky",
        ],
        'challenge': [
            "Can you ruck {distance} more miles? We believe in you! ğŸ¥¾ #GetRucky",
            "Challenge: Add {distance} miles this week! Go! ğŸ¥¾ #RuckItUp",
            "Ruck {distance} miles next! You've got it! ğŸ¥¾ @getrucky",
            "Push for {distance} miles! Show us! ğŸ¥¾ #RuckLife",
            "Ruck {distance} miles soon? Tag us! ğŸ¥¾ #GetRucky",
        ],
        'theme': [
            "Motivation Monday: Keep rucking strong! ğŸ¥¾ #GetRucky",
            "Ruck Tips Tuesday: Stay hydrated out there! ğŸ¥¾ #RuckItUp",
            "Wellness Wednesday: Ruck for mind and body! ğŸ¥¾ @getrucky",
            "Throwback Thursday: Got an old ruck story? ğŸ¥¾ #RuckLife",
            "Fitness Friday: Ruck hard today! ğŸ¥¾ #GetRucky",
        ],
        'poll': [
            "Ruck style? ğŸ¥¾ A) Solo B) Group #GetRucky",
            "Ruck weight? ğŸ¥¾ A) Light B) Heavy #RuckItUp",
            "Ruck time? ğŸ¥¾ A) Dawn B) Dusk #RuckLife @getrucky",
            "Ruck goal? ğŸ¥¾ A) Fun B) Fitness #GetRucky",
            "Ruck terrain? ğŸ¥¾ A) City B) Wild #RuckItUp",
        ],
        'meme': [
            "Ruck sweat = weakness leaving! ğŸ’ª ğŸ¥¾ #GetRucky",
            "Rucking: Cardio with attitude! ğŸ¥¾ #RuckItUp",
            "Ruck pack heavier than Monday blues! ğŸ¥¾ #RuckLife",
            "Ruck now, snack later! ğŸ˜‹ ğŸ¥¾ #GetRucky",
            "Rucking: My kind of therapy! ğŸ¥¾ #RuckItUp @getrucky",
        ],
        'shoutout': [
            "Ruck props to you! Keep crushing it! ğŸ¥¾ #GetRucky",
            "You're a ruck star! Shine on! ğŸ¥¾ #RuckItUp",
            "Epic rucking! We're impressed! ğŸ¥¾ @getrucky",
            "Ruck legend! Keep it up! ğŸ¥¾ #RuckLife",
            "Ruck champ! You're killing it! ğŸ¥¾ #GetRucky",
        ],
        'ugc': [
            "Love your ruck content! Share more! ğŸ¥¾ #GetRucky",
            "Your ruck pics rock! Got more? ğŸ¥¾ #RuckItUp",
            "Ruck inspo! Keep posting! ğŸ¥¾ @getrucky",
            "Your ruck story is awesome! More! ğŸ¥¾ #RuckLife",
            "Ruck vibes! Tag us again! ğŸ¥¾ #GetRucky",
        ]
    },
    'cross-post': {
        'pun': [
            "Ruck fan? Join the ruckus with @getrucky! ğŸ¥¾ #GetRucky",
            "Ruck 'n' roll with our app! @getrucky ğŸ¥¾ #RuckItUp",
            "Get Rucky! Track your rucks with us! ğŸ¥¾ #RuckLife",
            "Ruck yeah! Join @getrucky for more! ğŸ¥¾ #GetRucky",
            "Don't ruck alone! Check out @getrucky! ğŸ¥¾ #RuckItUp",
        ],
        'challenge': [
            "Ruck {distance} miles with @getrucky! Join now! ğŸ¥¾ #GetRucky",
            "Challenge: Ruck {distance} miles! Track it with @getrucky! ğŸ¥¾",
            "Can you ruck {distance} miles? Use @getrucky! ğŸ¥¾ #RuckItUp",
            "Ruck {distance} miles! Log it on @getrucky! ğŸ¥¾ #RuckLife",
            "Push {distance} miles! Join @getrucky! ğŸ¥¾ #GetRucky",
        ]
    }
}

def create_database():
    """Create the SQLite database and templates table if it doesn't exist."""
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    cursor.execute("""
        CREATE TABLE IF NOT EXISTS templates (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            text TEXT NOT NULL,
            type TEXT NOT NULL,
            category TEXT NOT NULL
        )
    """)
    conn.commit()
    conn.close()
    print(f"Database created at {DB_PATH}")

def insert_template(text, type, category):
    """Insert a single template into the database."""
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    cursor.execute("INSERT INTO templates (text, type, category) VALUES (?, ?, ?)", 
                   (text, type, category))
    conn.commit()
    conn.close()

def populate_templates():
    """Populate the database with templates from the TEMPLATES dictionary."""
    create_database()
    count = 0
    for type_key, categories in TEMPLATES.items():
        for category, texts in categories.items():
            for text in texts:
                insert_template(text, type_key, category)
                count += 1
                print(f"Inserted: {text[:50]}... (Type: {type_key}, Category: {category})")
    print(f"Total templates inserted: {count}")

def get_template_count():
    """Get the total number of templates in the database."""
    conn = sqlite3.connect(DB_PATH)
    cursor = conn.cursor()
    cursor.execute("SELECT COUNT(*) FROM templates")
    count = cursor.fetchone()[0]
    conn.close()
    return count

if __name__ == '__main__':
    if os.path.exists(DB_PATH):
        os.remove(DB_PATH)  # Remove existing DB to avoid duplicates
        print(f"Removed existing database at {DB_PATH}")
    populate_templates()
    total = get_template_count()
    print(f"Database population complete. Total templates: {total}") 